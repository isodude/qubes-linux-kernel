diff --git a/include/linux/psp-sev.h b/include/linux/psp-sev.h
index 1595088c428b..8f1ba8f631e2 100644
--- a/include/linux/psp-sev.h
+++ b/include/linux/psp-sev.h
@@ -15,11 +15,9 @@
 #include <uapi/linux/psp-sev.h>
 
 #ifdef CONFIG_X86
-#include <linux/mem_encrypt.h>
+#include <xen/page.h>
 
-#define __psp_pa(x)	__sme_pa(x)
-#else
-#define __psp_pa(x)	__pa(x)
+#define __psp_pa(x)     virt_to_machine((void *)x).maddr
 #endif
 
 #define SEV_FW_BLOB_MAX_SIZE	0x4000	/* 16KB */
